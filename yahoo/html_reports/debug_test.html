<!DOCTYPE html>
<html>
<head>
    <title>Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .player-row { 
            background: #f0f0f0; 
            padding: 10px; 
            margin: 5px 0; 
            cursor: pointer; 
            border-radius: 5px;
        }
        .player-row.expanded { background: #e3f2fd; }
        .player-details-row { 
            display: none; 
            background: #f8f9fa; 
            padding: 20px; 
            margin: 5px 0;
            border-radius: 5px;
        }
        .player-row.expanded + .player-details-row { display: block; }
        table { 
            width: 100%; 
            border-collapse: collapse; 
            margin: 10px 0;
        }
        th, td { 
            border: 1px solid #ddd; 
            padding: 8px; 
            text-align: left;
        }
        th { background: #667eea; color: white; }
    </style>
</head>
<body>
    <h1>Debug Test - Expandable Player</h1>
    
    <div class="player-row" onclick="togglePlayer(this)">
        <strong>Steven Adams</strong> - Click to expand
    </div>
    
    <div class="player-details-row">
        <div id="player-details">Loading details...</div>
    </div>
    
    <script>
        const playerData = {
  "player_id": "203500",
  "player_name": "Steven Adams",
  "last_name": "Adams",
  "first_name": "Steven",
  "seasons": {
    "2014": {
      "year": 2014,
      "games_played": 81,
      "team": "OKC",
      "fg_pct": 0.503,
      "ft_pct": 0.581,
      "threepm_pg": 0.0,
      "pts_pg": 3.27,
      "reb_pg": 4.1,
      "ast_pg": 0.53,
      "stl_pg": 0.49,
      "blk_pg": 0.7,
      "to_pg": 0.88
    },
    "2015": {
      "year": 2015,
      "games_played": 70,
      "team": "OKC",
      "fg_pct": 0.544,
      "ft_pct": 0.502,
      "threepm_pg": 0.0,
      "pts_pg": 7.67,
      "reb_pg": 7.47,
      "ast_pg": 0.94,
      "stl_pg": 0.54,
      "blk_pg": 1.23,
      "to_pg": 1.41
    },
    "2016": {
      "year": 2016,
      "games_played": 80,
      "team": "OKC",
      "fg_pct": 0.613,
      "ft_pct": 0.582,
      "threepm_pg": 0.0,
      "pts_pg": 7.95,
      "reb_pg": 6.66,
      "ast_pg": 0.78,
      "stl_pg": 0.53,
      "blk_pg": 1.11,
      "to_pg": 1.05
    },
    "2017": {
      "year": 2017,
      "games_played": 80,
      "team": "OKC",
      "fg_pct": 0.571,
      "ft_pct": 0.611,
      "threepm_pg": 0.0,
      "pts_pg": 11.31,
      "reb_pg": 7.66,
      "ast_pg": 1.07,
      "stl_pg": 1.11,
      "blk_pg": 0.97,
      "to_pg": 1.82
    },
    "2018": {
      "year": 2018,
      "games_played": 76,
      "team": "OKC",
      "fg_pct": 0.629,
      "ft_pct": 0.559,
      "threepm_pg": 0.0,
      "pts_pg": 13.89,
      "reb_pg": 9.01,
      "ast_pg": 1.16,
      "stl_pg": 1.21,
      "blk_pg": 1.03,
      "to_pg": 1.68
    },
    "2019": {
      "year": 2019,
      "games_played": 80,
      "team": "OKC",
      "fg_pct": 0.595,
      "ft_pct": 0.5,
      "threepm_pg": 0.0,
      "pts_pg": 13.85,
      "reb_pg": 9.5,
      "ast_pg": 1.55,
      "stl_pg": 1.46,
      "blk_pg": 0.95,
      "to_pg": 1.69
    },
    "2020": {
      "year": 2020,
      "games_played": 63,
      "team": "OKC",
      "fg_pct": 0.592,
      "ft_pct": 0.582,
      "threepm_pg": 0.02,
      "pts_pg": 10.86,
      "reb_pg": 9.25,
      "ast_pg": 2.32,
      "stl_pg": 0.81,
      "blk_pg": 1.06,
      "to_pg": 1.49
    },
    "2021": {
      "year": 2021,
      "games_played": 58,
      "team": "NOP",
      "fg_pct": 0.614,
      "ft_pct": 0.444,
      "threepm_pg": 0.0,
      "pts_pg": 7.55,
      "reb_pg": 8.86,
      "ast_pg": 1.91,
      "stl_pg": 0.93,
      "blk_pg": 0.66,
      "to_pg": 1.34
    },
    "2022": {
      "year": 2022,
      "games_played": 76,
      "team": "MEM",
      "fg_pct": 0.547,
      "ft_pct": 0.543,
      "threepm_pg": 0.0,
      "pts_pg": 6.95,
      "reb_pg": 10.0,
      "ast_pg": 3.37,
      "stl_pg": 0.85,
      "blk_pg": 0.79,
      "to_pg": 1.51
    },
    "2023": {
      "year": 2023,
      "games_played": 42,
      "team": "MEM",
      "fg_pct": 0.597,
      "ft_pct": 0.364,
      "threepm_pg": 0.0,
      "pts_pg": 8.6,
      "reb_pg": 11.55,
      "ast_pg": 2.31,
      "stl_pg": 0.86,
      "blk_pg": 1.09,
      "to_pg": 1.88
    }
  },
  "career_summary": {
    "games_played_avg": 70.6,
    "games_played_best": 81,
    "fg_pct_avg": 0.58,
    "fg_pct_best": 0.63,
    "ft_pct_avg": 0.53,
    "ft_pct_best": 0.61,
    "threepm_pg_avg": 0.0,
    "threepm_pg_best": 0.02,
    "pts_pg_avg": 9.19,
    "pts_pg_best": 13.89,
    "reb_pg_avg": 8.41,
    "reb_pg_best": 11.55,
    "ast_pg_avg": 1.59,
    "ast_pg_best": 3.37,
    "stl_pg_avg": 0.88,
    "stl_pg_best": 1.46,
    "blk_pg_avg": 0.96,
    "blk_pg_best": 1.23,
    "to_pg_avg": 1.48,
    "to_pg_best": 0.88,
    "total_seasons": 10,
    "total_games": 706,
    "years_active": "2014-2023"
  },
  "yahoo_draft_history": [
    {
      "year": 2016,
      "draft_cost": 7,
      "fantasy_team": "Make it Drizzle",
      "pick_number": 66,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    },
    {
      "year": 2017,
      "draft_cost": 5,
      "fantasy_team": "Get Schwifty",
      "pick_number": 81,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    },
    {
      "year": 2018,
      "draft_cost": 7,
      "fantasy_team": "The Bandwagon",
      "pick_number": 86,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    },
    {
      "year": 2019,
      "draft_cost": 3,
      "fantasy_team": "Get Schwifty",
      "pick_number": 100,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    },
    {
      "year": 2020,
      "draft_cost": 2,
      "fantasy_team": "The Krappers",
      "pick_number": 121,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    },
    {
      "year": 2021,
      "draft_cost": 1,
      "fantasy_team": "Bzzzzznatch",
      "pick_number": 149,
      "is_snake_draft": false,
      "yahoo_id": "5163"
    }
  ],
  "value_analysis": {
    "times_drafted": 6,
    "auction_drafts": 6,
    "snake_drafts": 0,
    "total_cost": 25,
    "avg_cost": 4.2,
    "production_score": 17.71,
    "value_score": 42.17,
    "cost_range": "$1-$7"
  },
  "data_source": "nba_mapped"
};
        
        function togglePlayer(row) {
            console.log('Toggle clicked');
            row.classList.toggle('expanded');
            
            if (row.classList.contains('expanded')) {
                renderPlayerDetails();
            }
        }
        
        function renderPlayerDetails() {
            console.log('Rendering details for:', playerData.player_name);
            console.log('Player data:', playerData);
            
            const container = document.getElementById('player-details');
            let html = '<h3>Player Details</h3>';
            
            // Draft History
            if (playerData.yahoo_draft_history && playerData.yahoo_draft_history.length > 0) {
                html += '<h4>Draft History (' + playerData.yahoo_draft_history.length + ' drafts)</h4>';
                html += '<table><thead><tr><th>Year</th><th>Team</th><th>Cost</th><th>Pick</th></tr></thead><tbody>';
                
                playerData.yahoo_draft_history.forEach(draft => {
                    html += '<tr>';
                    html += '<td>' + draft.year + '</td>';
                    html += '<td>' + draft.fantasy_team + '</td>';
                    html += '<td>$' + draft.draft_cost + '</td>';
                    html += '<td>#' + draft.pick_number + '</td>';
                    html += '</tr>';
                });
                
                html += '</tbody></table>';
            } else {
                html += '<p>No draft history available</p>';
            }
            
            // Season Stats
            if (playerData.seasons && Object.keys(playerData.seasons).length > 0) {
                const seasons = Object.entries(playerData.seasons).sort(([a], [b]) => parseInt(b) - parseInt(a));
                html += '<h4>Season Stats (' + seasons.length + ' seasons)</h4>';
                html += '<table><thead><tr><th>Year</th><th>Team</th><th>GP</th><th>PPG</th><th>RPG</th><th>APG</th></tr></thead><tbody>';
                
                seasons.forEach(([year, season]) => {
                    html += '<tr>';
                    html += '<td>' + year + '</td>';
                    html += '<td>' + (season.team || '-') + '</td>';
                    html += '<td>' + (season.games_played || 0) + '</td>';
                    html += '<td>' + (season.pts_pg ? season.pts_pg.toFixed(1) : '-') + '</td>';
                    html += '<td>' + (season.reb_pg ? season.reb_pg.toFixed(1) : '-') + '</td>';
                    html += '<td>' + (season.ast_pg ? season.ast_pg.toFixed(1) : '-') + '</td>';
                    html += '</tr>';
                });
                
                html += '</tbody></table>';
            } else {
                html += '<p>No season stats available</p>';
            }
            
            container.innerHTML = html;
        }
        
        console.log('Test page loaded');
        console.log('Player data loaded:', playerData.player_name);
    </script>
</body>
</html>