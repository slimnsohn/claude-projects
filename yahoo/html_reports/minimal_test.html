<!DOCTYPE html>
<html>
<head>
    <title>Minimal Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .debug { background: #f0f0f0; padding: 10px; margin: 10px 0; }
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        th { background: #f5f5f5; }
    </style>
</head>
<body>
    <h1>Minimal Player Data Test</h1>
    
    <div class="debug">
        <strong>Debug Info:</strong>
        <div id="debug-info">Initializing...</div>
    </div>
    
    <div id="player-count">Loading...</div>
    <div id="player-list">Loading players...</div>
    
    <script>
        // Step 1: Log that script is starting
        console.log('=== SCRIPT STARTING ===');
        
        // Step 2: Embed test data
        window.TEST_DATA = {"203518":{"player_id":"203518","player_name":"Alex Abrines","last_name":"Abrines","first_name":"Alex","seasons":{"2017":{"year":2017,"games_played":68,"team":"OKC","fg_pct":0.393,"ft_pct":0.898,"threepm_pg":1.38,"pts_pg":5.97,"reb_pg":1.26,"ast_pg":0.59,"stl_pg":0.54,"blk_pg":0.12,"to_pg":0.48},"2018":{"year":2018,"games_played":75,"team":"OKC","fg_pct":0.395,"ft_pct":0.848,"threepm_pg":1.12,"pts_pg":4.71,"reb_pg":1.52,"ast_pg":0.37,"stl_pg":0.51,"blk_pg":0.11,"to_pg":0.33},"2019":{"year":2019,"games_played":31,"team":"OKC","fg_pct":0.357,"ft_pct":0.923,"threepm_pg":1.32,"pts_pg":5.32,"reb_pg":1.55,"ast_pg":0.65,"stl_pg":0.55,"blk_pg":0.19,"to_pg":0.45}},"career_summary":{"games_played_avg":58.0,"games_played_best":75,"fg_pct_avg":0.38,"fg_pct_best":0.4,"ft_pct_avg":0.89,"ft_pct_best":0.92,"threepm_pg_avg":1.27,"threepm_pg_best":1.38,"pts_pg_avg":5.33,"pts_pg_best":5.97,"reb_pg_avg":1.44,"reb_pg_best":1.55,"ast_pg_avg":0.54,"ast_pg_best":0.65,"stl_pg_avg":0.53,"stl_pg_best":0.55,"blk_pg_avg":0.14,"blk_pg_best":0.19,"to_pg_avg":0.42,"to_pg_best":0.33,"total_seasons":3,"total_games":174,"years_active":"2017-2019"},"yahoo_draft_history":[],"value_analysis":{},"data_source":"nba_mapped"},"1630173":{"player_id":"1630173","player_name":"Precious Achiuwa","last_name":"Achiuwa","first_name":"Precious","seasons":{"2021":{"year":2021,"games_played":61,"team":"MIA","fg_pct":0.544,"ft_pct":0.509,"threepm_pg":0.0,"pts_pg":4.98,"reb_pg":3.41,"ast_pg":0.47,"stl_pg":0.33,"blk_pg":0.46,"to_pg":0.7},"2022":{"year":2022,"games_played":73,"team":"TOR","fg_pct":0.439,"ft_pct":0.595,"threepm_pg":0.77,"pts_pg":9.1,"reb_pg":6.48,"ast_pg":1.12,"stl_pg":0.51,"blk_pg":0.56,"to_pg":1.15},"2023":{"year":2023,"games_played":55,"team":"TOR","fg_pct":0.485,"ft_pct":0.702,"threepm_pg":0.53,"pts_pg":9.24,"reb_pg":5.96,"ast_pg":0.91,"stl_pg":0.56,"blk_pg":0.55,"to_pg":1.07},"2024":{"year":2024,"games_played":74,"team":"NYK, TOR","fg_pct":0.501,"ft_pct":0.616,"threepm_pg":0.35,"pts_pg":7.63,"reb_pg":6.58,"ast_pg":1.31,"stl_pg":0.62,"blk_pg":0.92,"to_pg":1.12}},"career_summary":{"games_played_avg":65.75,"games_played_best":74,"fg_pct_avg":0.49,"fg_pct_best":0.54,"ft_pct_avg":0.61,"ft_pct_best":0.7,"threepm_pg_avg":0.41,"threepm_pg_best":0.77,"pts_pg_avg":7.74,"pts_pg_best":9.24,"reb_pg_avg":5.61,"reb_pg_best":6.58,"ast_pg_avg":0.95,"ast_pg_best":1.31,"stl_pg_avg":0.5,"stl_pg_best":0.62,"blk_pg_avg":0.62,"blk_pg_best":0.92,"to_pg_avg":1.01,"to_pg_best":0.7,"total_seasons":4,"total_games":263,"years_active":"2021-2024"},"yahoo_draft_history":[],"value_analysis":{},"data_source":"nba_mapped"},"203112":{"player_id":"203112","player_name":"Quincy Acy","last_name":"Acy","first_name":"Quincy","seasons":{"2013":{"year":2013,"games_played":29,"team":"TOR","fg_pct":0.56,"ft_pct":0.816,"threepm_pg":0.03,"pts_pg":4.0,"reb_pg":2.65,"ast_pg":0.38,"stl_pg":0.45,"blk_pg":0.52,"to_pg":0.59},"2014":{"year":2014,"games_played":63,"team":"SAC, TOR","fg_pct":0.468,"ft_pct":0.66,"threepm_pg":0.06,"pts_pg":2.71,"reb_pg":3.43,"ast_pg":0.44,"stl_pg":0.36,"blk_pg":0.41,"to_pg":0.48},"2015":{"year":2015,"games_played":68,"team":"NYK","fg_pct":0.459,"ft_pct":0.784,"threepm_pg":0.27,"pts_pg":5.85,"reb_pg":4.43,"ast_pg":1.0,"stl_pg":0.4,"blk_pg":0.32,"to_pg":0.88},"2016":{"year":2016,"games_played":59,"team":"SAC","fg_pct":0.556,"ft_pct":0.735,"threepm_pg":0.32,"pts_pg":5.2,"reb_pg":3.19,"ast_pg":0.46,"stl_pg":0.49,"blk_pg":0.41,"to_pg":0.46},"2017":{"year":2017,"games_played":38,"team":"BKN, DAL","fg_pct":0.412,"ft_pct":0.75,"threepm_pg":0.97,"pts_pg":5.84,"reb_pg":3.03,"ast_pg":0.47,"stl_pg":0.37,"blk_pg":0.4,"to_pg":0.55},"2018":{"year":2018,"games_played":70,"team":"BKN","fg_pct":0.356,"ft_pct":0.817,"threepm_pg":1.46,"pts_pg":5.87,"reb_pg":3.67,"ast_pg":0.81,"stl_pg":0.47,"blk_pg":0.41,"to_pg":0.86},"2019":{"year":2019,"games_played":10,"team":"PHX","fg_pct":0.222,"ft_pct":0.7,"threepm_pg":0.2,"pts_pg":1.7,"reb_pg":2.5,"ast_pg":0.8,"stl_pg":0.1,"blk_pg":0.4,"to_pg":0.4}},"career_summary":{"games_played_avg":48.14,"games_played_best":70,"fg_pct_avg":0.43,"fg_pct_best":0.56,"ft_pct_avg":0.75,"ft_pct_best":0.82,"threepm_pg_avg":0.47,"threepm_pg_best":1.46,"pts_pg_avg":4.45,"pts_pg_best":5.87,"reb_pg_avg":3.27,"reb_pg_best":4.43,"ast_pg_avg":0.62,"ast_pg_best":1.0,"stl_pg_avg":0.38,"stl_pg_best":0.49,"blk_pg_avg":0.41,"blk_pg_best":0.52,"to_pg_avg":0.6,"to_pg_best":0.4,"total_seasons":7,"total_games":337,"years_active":"2013-2019"},"yahoo_draft_history":[],"value_analysis":{},"data_source":"nba_mapped"}};
        console.log('Test data embedded:', Object.keys(window.TEST_DATA).length, 'players');
        
        // Step 3: Update debug info
        function updateDebug(message) {
            const debugEl = document.getElementById('debug-info');
            if (debugEl) {
                debugEl.innerHTML += '<br>' + message;
            }
            console.log('DEBUG:', message);
        }
        
        // Step 4: Try to access and display data
        function loadTestData() {
            updateDebug('loadTestData() called');
            
            try {
                if (!window.TEST_DATA) {
                    throw new Error('No TEST_DATA found');
                }
                
                const players = window.TEST_DATA;
                const playerCount = Object.keys(players).length;
                
                updateDebug(`Found ${playerCount} players in TEST_DATA`);
                
                // Update count
                const countEl = document.getElementById('player-count');
                if (countEl) {
                    countEl.textContent = `Found ${playerCount} test players`;
                }
                
                // Create player table
                let html = '<table><thead><tr><th>Player Name</th><th>Has Seasons</th><th>Has Drafts</th></tr></thead><tbody>';
                
                Object.entries(players).forEach(([id, player]) => {
                    const name = player.player_name || 'NO NAME';
                    const hasSeasons = player.seasons && Object.keys(player.seasons).length > 0;
                    const hasDrafts = player.yahoo_draft_history && player.yahoo_draft_history.length > 0;
                    
                    html += `<tr>`;
                    html += `<td>${name}</td>`;
                    html += `<td>${hasSeasons ? 'Yes' : 'No'}</td>`;
                    html += `<td>${hasDrafts ? 'Yes' : 'No'}</td>`;
                    html += `</tr>`;
                    
                    updateDebug(`Player: ${name}, Seasons: ${hasSeasons}, Drafts: ${hasDrafts}`);
                });
                
                html += '</tbody></table>';
                
                // Update player list
                const listEl = document.getElementById('player-list');
                if (listEl) {
                    listEl.innerHTML = html;
                }
                
                updateDebug('Table created successfully');
                
            } catch (error) {
                updateDebug('ERROR: ' + error.message);
                console.error('Error in loadTestData:', error);
                
                const listEl = document.getElementById('player-list');
                if (listEl) {
                    listEl.innerHTML = '<p style="color: red;">Error: ' + error.message + '</p>';
                }
            }
        }
        
        // Step 5: Wait for DOM and run test
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => {
                updateDebug('DOM loaded, calling loadTestData()');
                loadTestData();
            });
        } else {
            updateDebug('DOM already loaded, calling loadTestData()');
            loadTestData();
        }
        
        updateDebug('Script setup complete');
    </script>
</body>
</html>